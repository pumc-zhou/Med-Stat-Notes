{
  "hash": "84490272c57323cf3ea45864de2e5bb0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"04-ggplot2 绘图——折线图\"\nauthor: \"Simonzhou\"\ndate: \"2025-07-19\"\ndate-modified: today\nformat: \n    html:\n        code-fold: true\n        code-line-numbers: true\n        code-highlight: true\n        fig_caption: true\n        number-sections: true\n        toc: true\n        toc-depth: 3\n---\n\n\n\n\n\n# 折线图\n\n## 绘制基本折线图\n\n运行 `ggplot()` 函数和 `geom_line()` 函数，并分别指定一个变量映射到 `x` 和 `y` 。\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load package\nlibrary(ggplot2)\n# load dataset\nBOD\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Time demand\n1    1    8.3\n2    2   10.3\n3    3   19.0\n4    4   16.0\n5    5   15.6\n6    7   19.8\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(BOD,aes(x = Time,y = demand))+\ngeom_line()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n\n\n折线图的 X 轴既可以对应于离散（分类）变量，也可以对应于连续（数值型）变量。\n\n在上图中，Demand 变量为数值型变量，但我们可以借助于 `factor()` 函数将其转换为因子型变量，然后，将其当作分类变量来处理。\n\n当 X 对应于因子型变量时，必须使用命令 `aex(group = 1)` 以确保 `ggplot` 知道这些数据点属于同一个分组，应该用一条折现将他们连在一起。\n\n\n\n\n\n::: {.cell fig-caption='{}'}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load package\nlibrary(ggplot2)\n# load dataset and copy a dataset\nBOD1 <- BOD\nBOD1$Time <- factor(BOD1$Time)\n\nggplot(BOD1,aes(x = Time,y = demand,group = 1))+\ngeom_line()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## 向折线图添加数据标记\n\n在代码中加上 `geom_point()` 即可：\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load package\nlibrary(ggplot2)\n# load dataset\nBOD\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Time demand\n1    1    8.3\n2    2   10.3\n3    3   19.0\n4    4   16.0\n5    5   15.6\n6    7   19.8\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(BOD,aes(x = Time,y = demand))+\ngeom_line()+\ngeom_point()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n\n有时候，在折线图上添加数据标记很有用。\n\n当数据点的密度较低或数据采集频率不规则时，尤其有用。\n\n例如，BOD 数据集中没有与 Time=6 相对应的输入，然而，这在一张单独的折线图中看起来并不明显。\n\n### worldpop数据集\n\nworldpop数据集对应的采集时间间隔不是常数，时间距今较久远的数据采集频率比新近不久的数据采集频率低。\n\n折线图中的数据标记表明了数据的采集时间：\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load package\nlibrary(ggplot2)\n# load dataset\nlibrary(gcookbook)\n\nggplot(worldpop,aes(x = Year,y = Population))+\ngeom_line()+\ngeom_point()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\n# when Y axis turn to log()\nggplot(worldpop,aes(x = Year,y = Population))+\ngeom_line()+\ngeom_point()+\nscale_y_log10()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\n\n\n\n## 绘制多重折线图\n\n除了分别设定一个映射到 x 和 y 的变量，再将另一个（离散）变量映射到颜色（colour）或者线性（linetype）即可：\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load package\nlibrary(ggplot2)\n# load dataset\nlibrary(gcookbook)\n\n#colour\nggplot(tg,aes(x = dose,y = length, colour = supp))+\ngeom_line()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\n# linetype\nggplot(tg,aes(x = dose,y = length, linetype = supp))+\ngeom_line()\n```\n\n::: {.cell-output-display}\n![](04-ggplot2-folded-line_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n\n\n\n\ntg 数据集共有三列，其中一列正是我们映射到 colour 和 linetype 的 supp 因子（离散型变量），而将 dose 作为 x 轴，lengt 作为 y 轴（连续型变量）。",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}